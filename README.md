# neck-scent-player

脖戴式气味播放器

# 无线通讯物理层

协议物理层为无线通信，频段为433M，芯片为CC1101

# 无线通讯协议

## 数据包结构

手持遥控器以查询方式对气味播放器进行访问和操作，气味播放器不主动送出数据。

主机访问目标设备数据包结构为：

| 包头 | 1字节（0xf5） |
| --- | --- |
| 本机设备类型 | 1字节 |
| 本机设备地址 | 2字节 |
| 目标设备类型 | 1字节 |
| 目标设备地址 | 2字节 |
| 功能码 | 1字节 |
| 有效数据 | n字节 |
| 校验字 | 2字节 |
| 包尾 | 1字节（0x55） |

目标设备回应主机数据包结构为：

| 包头 | 1字节（0xf5） |
| --- | --- |
| 本机设备类型 | 1字节 |
| 本机设备地址 | 2字节 |
| 目标设备类型 | 1字节 |
| 目标设备地址 | 2字节 |
| 功能码（应答） | 1字节 |
| 有效数据 | n字节 |
| 校验字 | 2字节 |
| 包尾 | 1字节（0x55） |

> 通信协议采用**大端模式**，当数据大于1字节时，数据高位放在低地址中。当手持遥控器对指定气味播放器进行访问和操作时，气味播放器需要回送响应数据包，表示已经成功收到数据并正确执行；当手持遥控器发送数据包的目标设备地址为广播地址（0xffff）时，气味播放器收到数据后不需要回送响应数据包。
>
